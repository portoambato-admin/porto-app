<!DOCTYPE html>
<html>
  <head>
    <base href="/" />
    <meta charset="UTF-8" />
    <meta name="description" content="Academia Oficial de Fútbol Porto Ambato. Entrenamientos por categorías, evaluaciones de rendimiento y gestión de pagos." />
    <meta name="keywords" content="PortoAmbato, academia de fútbol, Ambato, entrenamientos, categorías, niños, jóvenes" />
    <meta name="author" content="PortoAmbato" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="PortoAmbato - Academia Oficial de Fútbol" />
    <meta property="og:description" content="Formamos talento. Inspiramos disciplina." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="favicon.png" />
    <meta name="theme-color" content="#0D47A1"/>
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <title>PortoAmbato | Academia Oficial de Fútbol</title>
    <style>
      .center {position:fixed;inset:0;display:grid;place-items:center;font-family:sans-serif;color:#0D47A1}
    </style>
    <!-- Debe ir antes del script que inicializa -->
    <script defer src="flutter.js"></script>
  </head>
  <body>
    <div id="loader" class="center">Cargando PortoAmbato…</div>

    <script>
      window.addEventListener('load', function () {
        const loaderEl = document.getElementById('loader');

        // Ocultar loader cuando Flutter pinta el primer frame
        window.addEventListener('flutter-first-frame', function () {
          loaderEl?.remove();
        });

        // Compatibilidad: intenta la API nueva primero; si no existe, usa la antigua.
        // Algunos entornos exponen el loader como window.flutterLoader y otros como window._flutter.loader
        const apiNew = window.flutterLoader;
        const apiOld = (window._flutter && window._flutter.loader) ? window._flutter.loader : null;

        function start(engineInitializer) {
          return engineInitializer.initializeEngine().then(function (appRunner) {
            return appRunner.runApp();
          });
        }

        if (apiNew && typeof apiNew.load === 'function') {
          // ✅ API nueva (recomendada)
          apiNew.load({
            onEntrypointLoaded: function (engineInitializer) {
              start(engineInitializer);
            }
          });
        } else if (apiOld && typeof apiOld.loadEntrypoint === 'function') {
          // ↩️ API anterior (deprecada, pero funcional)
          apiOld.loadEntrypoint({}).then(function (engineInitializer) {
            return start(engineInitializer);
          });
        } else {
          // Si no se encontró ninguna, muestra error visible
          console.error('No se encontró el Flutter loader (flutter.js).');
          if (loaderEl) loaderEl.textContent = 'Error cargando Flutter. Revisa la consola.';
        }
      });
    </script>
  </body>
</html>
